var FirefoxProfile = require('./lib/firefox_profile'),
        wd = require('wd');

    // set some userPrefs if needed
    // Note: make sure you call encoded() after setting some userPrefs
    var fp = new FirefoxProfile();
    // activate and open firebug by default for all sites
    fp.setPreference('extensions.firebug.allPagesActivation', 'on');
    // activate the console panel
    fp.setPreference('extensions.firebug.console.enableSites', true);
    // show the console panel
    fp.setPreference('extensions.firebug.defaultPanelName', 'console');
    fp.setPreference('some.custom.pref', 'con\sole');
    fp.setPreference('some.custom.otherpref', 'con\\sole');
    // done with prefs?
    fp.updatePreferences();

    // you can install multiple extensions at the same time
    // fp.addExtensions(['./test/extensions/firebug-1.12.4-fx.xpi'], function() {
        fp.encoded(function(zippedProfile) {
            console.log(zippedProfile);
            browser = wd.promiseChainRemote();
            browser.init({
              browserName:'firefox',
              // set firefox_profile capabilities HERE!!!!
              firefox_profile: zippedProfile
            }).
            // woOot!!
            get('https://en.wikipedia.org/wiki/Main_Page').then(function () {
                return new Promise(function(resolve) {
                    setTimeout(function () { resolve(); }, 1000000);
                });
            }).done();
        });
// });
